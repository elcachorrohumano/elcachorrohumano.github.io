// ===========================================
// BASE STYLES - UKIYO-E AESTHETIC
// 基本スタイル
// ===========================================

*
  box-sizing: border-box

html
  scroll-behavior: smooth
  
  @media (prefers-reduced-motion: reduce)
    scroll-behavior: auto

// ===========================================
// BODY & BACKGROUND LAYERS
// Layered paper scroll effect
// ===========================================

body
  background: var(--bg-paper)
  color: var(--text-primary)
  font-family: $font-family
  font-weight: $font-weight
  font-size: $font-size
  line-height: $line-height
  margin: 0
  min-height: 100vh
  -webkit-text-size-adjust: 100%
  -webkit-font-smoothing: antialiased
  -moz-osx-font-smoothing: grayscale
  transition: background-color $transition-speed, color $transition-speed
  position: relative
  overflow-x: hidden

// ===========================================
// BACKGROUND LAYER 1: Frog Wallpaper
// The Chōjū-giga (Frolicking Animals) scroll
// ===========================================

body::before
  content: ''
  position: fixed
  top: 0
  left: 0
  right: 0
  bottom: 0
  background-image: url('/assets/frogwallpaper1.jpg')
  background-size: 800px auto
  background-position: center top
  background-repeat: repeat
  background-attachment: fixed
  opacity: var(--pattern-opacity, 0.04)
  pointer-events: none
  z-index: -3
  // Warm paper tint
  filter: sepia(0.1) contrast(0.95)

// ===========================================
// BACKGROUND LAYER 2: Paper Texture Overlay
// Subtle grain and vignette
// ===========================================

body::after
  content: ''
  position: fixed
  top: 0
  left: 0
  right: 0
  bottom: 0
  background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.03) 100%), linear-gradient(180deg, transparent 0%, rgba(139, 119, 101, 0.02) 50%, transparent 100%)
  pointer-events: none
  z-index: -2

// Night mode adjustments
[data-theme="night"] body::before
  opacity: 0.025
  filter: invert(1) brightness(0.6) sepia(0.2)

[data-theme="night"] body::after
  background: radial-gradient(ellipse at center, transparent 0%, rgba(0,0,0,0.15) 100%)

// ===========================================
// TYPOGRAPHY
// Strong hierarchy with Ukiyo-e influence
// ===========================================

h1, h2, h3, h4, h5, h6
  font-family: $heading-font
  font-weight: $heading-weight
  letter-spacing: -0.02em
  color: var(--text-primary)
  margin-top: 0
  line-height: 1.25

h1
  font-size: clamp(2rem, 5vw, 2.75rem)
  margin-bottom: $space-lg
  position: relative

h2
  font-size: clamp(1.5rem, 4vw, 2rem)
  margin-bottom: $space-md
  color: var(--accent-primary)

h3
  font-size: clamp(1.25rem, 3vw, 1.5rem)
  margin-bottom: $space-md
  color: var(--text-primary)

h4
  font-size: 1.125rem
  margin-bottom: $space-sm

h5, h6
  font-size: 1rem
  margin-bottom: $space-sm

b, strong, th
  font-weight: 600
  color: var(--text-primary)

p
  color: var(--text-secondary)
  margin: 0 0 $space-lg
  
  &:last-child
    margin-bottom: 0

// ===========================================
// LINKS
// Ink-like hover states
// ===========================================

a
  color: var(--accent-primary)
  text-decoration: none
  transition: color $transition-fast, opacity $transition-fast
  font-weight: 500
  position: relative
  
  &:hover
    color: var(--accent-secondary)
  
  &:focus-visible
    outline: none
    box-shadow: var(--focus-ring)
    border-radius: 2px

// Underline effect for content links
article p a, article li a, .main-content a
  text-decoration: underline
  text-decoration-color: var(--border-strong)
  text-underline-offset: 3px
  text-decoration-thickness: 1px
  
  &:hover
    text-decoration-color: var(--accent-secondary)

header a, footer a, aside a, nav a
  color: inherit
  text-decoration: none

// ===========================================
// HORIZONTAL RULE
// Seigaiha-inspired wave divider
// ===========================================

hr
  border: none
  height: 2px
  background: linear-gradient(90deg, transparent 0%, var(--border-strong) 15%, var(--accent-primary) 50%, var(--border-strong) 85%, transparent 100%)
  margin: $space-3xl 0
  position: relative
  opacity: 0.6

hr::before
  content: '〰'
  position: absolute
  left: 50%
  top: 50%
  transform: translate(-50%, -50%)
  background: var(--bg-paper)
  padding: 0 $space-md
  color: var(--accent-primary)
  font-size: 1.25rem
  letter-spacing: -0.15em

// ===========================================
// LISTS
// ===========================================

ul, ol
  padding-left: $space-xl
  margin: $space-md 0 $space-lg

li
  margin: $space-sm 0
  color: var(--text-secondary)
  line-height: 1.7
  
  &::marker
    color: var(--accent-tertiary)

// ===========================================
// IMAGES
// Mounted print aesthetic
// ===========================================

img
  max-width: 100%
  height: auto
  border-radius: 4px
  display: block

figure
  margin: $space-xl 0
  
figcaption
  font-size: 0.875rem
  color: var(--text-tertiary)
  text-align: center
  margin-top: $space-md
  font-style: italic

// ===========================================
// BLOCKQUOTE
// Traditional scroll quote style
// ===========================================

blockquote
  background: var(--bg-elevated)
  border-left: 3px solid var(--accent-primary)
  padding: $space-xl $space-xl $space-xl $space-2xl
  margin: $space-xl 0
  color: var(--text-secondary)
  font-style: italic
  border-radius: 0 6px 6px 0
  box-shadow: var(--shadow-sm)
  position: relative
  
  &::before
    content: '「'
    position: absolute
    left: $space-md
    top: $space-md
    font-size: 2rem
    color: var(--accent-primary)
    opacity: 0.3
    font-style: normal
    font-family: $display-font
    line-height: 1

  p
    margin: 0

  cite
    display: block
    margin-top: $space-md
    font-size: 0.9rem
    color: var(--text-tertiary)
    font-style: normal
    
    &::before
      content: '— '

// ===========================================
// CODE
// ===========================================

pre
  background: var(--bg-secondary)
  border-radius: 6px
  font-size: 0.875rem
  margin: $space-xl 0
  padding: $space-lg
  overflow-x: auto
  border: 1px solid var(--border-subtle)
  box-shadow: var(--shadow-inset)

\:not(pre) > code
  font-size: 0.875em
  background: var(--bg-secondary)
  color: var(--accent-primary)
  border-radius: 3px
  padding: 0.15em 0.4em
  font-weight: 500
  border: 1px solid var(--border-light)

// ===========================================
// TABLES
// ===========================================

table
  width: 100%
  border-collapse: collapse
  margin: $space-xl 0
  background: var(--bg-elevated)
  border-radius: 6px
  overflow: hidden
  box-shadow: var(--shadow-sm)
  border: 1px solid var(--border-subtle)

th, td
  padding: $space-md $space-lg
  text-align: left
  border-bottom: 1px solid var(--border-light)

th
  background: var(--bg-secondary)
  color: var(--text-primary)
  font-weight: 600
  font-size: 0.875rem
  text-transform: uppercase
  letter-spacing: 0.04em

tr:last-child td
  border-bottom: none

tr:hover td
  background: var(--bg-accent)
  transition: background-color $transition-fast

// ===========================================
// SELECTION
// ===========================================

\::selection
  background: var(--accent-primary)
  color: white

// ===========================================
// SCROLLBAR
// Minimal, elegant
// ===========================================

\::-webkit-scrollbar
  width: 8px
  height: 8px

\::-webkit-scrollbar-track
  background: var(--bg-secondary)

\::-webkit-scrollbar-thumb
  background: var(--border-strong)
  border-radius: 4px
  
  &:hover
    background: var(--text-muted)

// ===========================================
// SCROLL REVEAL ANIMATIONS
// Crafted, organic motion
// ===========================================

@keyframes fadeIn
  from
    opacity: 0
  to
    opacity: 1

@keyframes slideUp
  from
    opacity: 0
    transform: translateY(30px)
  to
    opacity: 1
    transform: translateY(0)

@keyframes slideInLeft
  from
    opacity: 0
    transform: translateX(-30px)
  to
    opacity: 1
    transform: translateX(0)

@keyframes slideInRight
  from
    opacity: 0
    transform: translateX(30px)
  to
    opacity: 1
    transform: translateX(0)

@keyframes revealUp
  from
    opacity: 0
    transform: translateY(40px) scale(0.98)
  to
    opacity: 1
    transform: translateY(0) scale(1)

// Scroll reveal classes (applied via JS)
.reveal
  opacity: 0
  transform: translateY(30px)
  transition: opacity $transition-organic, transform $transition-organic
  
  &.revealed
    opacity: 1
    transform: translateY(0)

.reveal-left
  opacity: 0
  transform: translateX(-30px)
  transition: opacity $transition-organic, transform $transition-organic
  
  &.revealed
    opacity: 1
    transform: translateX(0)

.reveal-right
  opacity: 0
  transform: translateX(30px)
  transition: opacity $transition-organic, transform $transition-organic
  
  &.revealed
    opacity: 1
    transform: translateX(0)

// Stagger delays for grid items
@for $i from 1 through 12
  .reveal-delay-#{$i}
    transition-delay: #{$i * 0.08}s

// Reduced motion preference
@media (prefers-reduced-motion: reduce)
  .reveal, .reveal-left, .reveal-right
    opacity: 1
    transform: none
    transition: none
